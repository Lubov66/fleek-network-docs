"use strict";(self.webpackChunkdocta=self.webpackChunkdocta||[]).push([[1984],{8432:(e,n,t)=>{t.d(n,{ZP:()=>o});var s=t(5893),i=t(1151);function r(e){const n={admonition:"admonition",code:"code",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["We recommend creating a ",(0,s.jsx)(n.code,{children:"non-root"})," user with administrative privileges. It'll allow us to install any system requirements."]}),"\n",(0,s.jsxs)(n.p,{children:["You can create a new user and add to the ",(0,s.jsx)(n.strong,{children:"sudo"})," group by running:"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["For our example, we'll be using the name ",(0,s.jsx)(n.code,{children:"lgtn"})," but you can pick whichever you'd like. If you already have a ",(0,s.jsx)(n.strong,{children:"sudoer"})," account, you can skip this step."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo adduser lgtn\n"})}),"\n",(0,s.jsxs)(n.p,{children:["After completing the ",(0,s.jsx)(n.code,{children:"adduser"})," steps, execute the ",(0,s.jsx)(n.code,{children:"usermod"})," to add the ",(0,s.jsx)(n.code,{children:"user"})," to the ",(0,s.jsx)(n.strong,{children:"sudo"})," group, as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo usermod -aG sudo lgtn\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Switch to the new ",(0,s.jsx)(n.strong,{children:"user"})," by using the command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"su lgtn\n"})}),"\n",(0,s.jsx)(n.p,{children:"Change the directory to the new user's home, as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd /home/lgtn\n"})})]})}function o(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},3183:(e,n,t)=>{t.d(n,{ZP:()=>o});var s=t(5893),i=t(1151);function r(e){const n={a:"a",admonition:"admonition",code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"You have several ways of doing this:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Clone via HTTPS"}),"\n",(0,s.jsx)(n.li,{children:"Clone via SSH"}),"\n",(0,s.jsx)(n.li,{children:"Download via Github CLI"}),"\n",(0,s.jsxs)(n.li,{children:["Download the ",(0,s.jsx)(n.a,{href:"https://github.com/fleek-network/lightning/archive/refs/heads/main.zip",children:"zip package"})," from the repository"]}),"\n"]}),(0,s.jsxs)(n.p,{children:["We recommend HTTPS because it is the easiest to set up in the wild, and by users who are new to all this.\nAlthough, we strongly recommend using an SSH connection when interacting with GitHub. If you are to this and are interested read more about it ",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh",children:"here"}),"."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"git clone -b testnet-alpha-1 https://github.com/fleek-network/lightning.git <DIRECTORY-NAME>\n"})}),(0,s.jsxs)(n.p,{children:["At time of writing, we are checking the branch name ",(0,s.jsx)(n.code,{children:"testnet-alpha-1"})," that corresponds to the testnet phase.\nHere's an example of what it'd look like when sticking to the recommended path location:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"git clone -b testnet-alpha-1 https://github.com/fleek-network/lightning.git ~/fleek-network/lightning\n"})})]})}function o(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},1761:(e,n,t)=>{t.d(n,{ZP:()=>o});var s=t(5893),i=t(1151);function r(e){const n={admonition:"admonition",code:"code",p:"p",strong:"strong",...(0,i.a)(),...e.components};return(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["The flag ",(0,s.jsx)(n.code,{children:"-c"})," in the ",(0,s.jsx)(n.code,{children:"lightning.service"})," ",(0,s.jsx)(n.strong,{children:"ExecStart"}),", is to provide the toml configuration file path e.g. defaults to ",(0,s.jsx)(n.code,{children:"~/.lightning/config.toml"}),". This is to avoid the path being determined dynamically (given path base ~ or $HOME), as users might control the systemctl service as a ",(0,s.jsx)(n.strong,{children:"user"})," or ",(0,s.jsx)(n.strong,{children:"sudoer"}),". For example, a ",(0,s.jsx)(n.strong,{children:"sudoer"})," would have the ",(0,s.jsx)(n.strong,{children:"configuration"})," set to ",(0,s.jsx)(n.code,{children:"/root/.lightning/config.toml"})," or ",(0,s.jsx)(n.code,{children:"/home/username/.lightning/config.toml"})," depending on using ",(0,s.jsx)(n.strong,{children:"sudo"})," which might cause some confusion to some users."]})})}function o(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},4405:(e,n,t)=>{t.d(n,{ZP:()=>o});var s=t(5893),i=t(1151);function r(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["You should be following the ",(0,s.jsx)(n.a,{href:"/docs/node/install#create-a-user-1",children:"create a user"})," recommendation. For our example, we have the username ",(0,s.jsx)(n.code,{children:"lgtn"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["If you have chosen a different username, replace ",(0,s.jsx)(n.code,{children:"lgtn"})," by the correct username you have selected."]})}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.code,{children:"config.toml"})," you'll find some and more of the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[BLANK]\n\n[application]\ndb_path = "~/.lightning/data/app_db"\n\n[consensus]\nstore_path = "~/.lightning/data/narwhal_store"\n\n[fsstore]\nroot = "~/.lightning/blockstore"\n\n[resolver]\nstore_path = "~/.lightning/data/resolver_store"\n\n[signer]\nconsensus_key_path = "~/.lightning/keystore/consensus.pem"\nnode_key_path = "~/.lightning/keystore/node.pem"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Find and replace all instances of ",(0,s.jsx)(n.code,{children:"~"})," in the config file ",(0,s.jsx)(n.code,{children:"/home/lgtn/.lightning/config.toml"}),". Here's an example using ",(0,s.jsx)(n.code,{children:"sed"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'sed -i "s|~/.lightning|/home/lgtn/.lightning|g" "/home/lgtn/.lightning/config.toml"\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"config.toml"})," example below is a shorter version of what you'll encounter, yours might look different. We do this to keep the guide simple to read. Do not copy and replace with the version demonstrated here."]})}),"\n",(0,s.jsxs)(n.p,{children:["Once changed, all the instances of ",(0,s.jsx)(n.code,{children:"~/"})," should be replaced by your user path e.g. ",(0,s.jsx)(n.code,{children:"/home/lgtn/"}),". For our example, the output would look like the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[BLANK]\n\n[application]\ndb_path = "/home/lgtn/.lightning/data/app_db"\n\n[consensus]\nstore_path = "/home/lgtn/.lightning/data/narwhal_store"\n\n[fsstore]\nroot = "/home/lgtn/.lightning/blockstore"\n\n[resolver]\nstore_path = "/home/lgtn/.lightning/data/resolver_store"\n\n[signer]\nconsensus_key_path = "/home/lgtn/.lightning/keystore/consensus.pem"\nnode_key_path = "/home/lgtn/.lightning/keystore/node.pem"\n'})})]})}function o(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},7859:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>g,contentTitle:()=>h,default:()=>x,frontMatter:()=>d,metadata:()=>u,toc:()=>p});var s=t(5893),i=t(1151),r=t(3872),o=t(3183),l=t(8432),a=t(4405),c=t(1761);const d={title:"Install",hide_title:!0,slug:"install",date:new Date("2023-08-21T23:00:00.000Z"),canonical:"",description:"The Fleek Network Lightning CLI installation walkthrough",category:"Tutorial",tags:["CDN","Guide","Getting Started","Fleek Network","Rust dependencies","compile","build","wizard","manual"]},h=void 0,u={id:"node/install",title:"Install",description:"The Fleek Network Lightning CLI installation walkthrough",source:"@site/docs/node/install.md",sourceDirName:"node",slug:"/node/install",permalink:"/docs/node/install",draft:!1,unlisted:!1,tags:[{label:"CDN",permalink:"/docs/tags/cdn"},{label:"Guide",permalink:"/docs/tags/guide"},{label:"Getting Started",permalink:"/docs/tags/getting-started"},{label:"Fleek Network",permalink:"/docs/tags/fleek-network"},{label:"Rust dependencies",permalink:"/docs/tags/rust-dependencies"},{label:"compile",permalink:"/docs/tags/compile"},{label:"build",permalink:"/docs/tags/build"},{label:"wizard",permalink:"/docs/tags/wizard"},{label:"manual",permalink:"/docs/tags/manual"}],version:"current",frontMatter:{title:"Install",hide_title:!0,slug:"install",date:"2023-08-21T23:00:00.000Z",canonical:"",description:"The Fleek Network Lightning CLI installation walkthrough",category:"Tutorial",tags:["CDN","Guide","Getting Started","Fleek Network","Rust dependencies","compile","build","wizard","manual"]},sidebar:"docs",previous:{title:"Testnet onboarding",permalink:"/docs/node/testnet-onboarding"},next:{title:"Health check",permalink:"/docs/node/health-check"}},g={},p=[{value:"Assisted installer",id:"assisted-installer",level:2},{value:"Prerequesites",id:"prerequesites",level:3},{value:"Connect to your server",id:"connect-to-your-server",level:3},{value:"Create a user",id:"create-a-user",level:3},{value:"Run the script for a quick install",id:"run-the-script-for-a-quick-install",level:3},{value:"About the process",id:"about-the-process",level:3},{value:"Manual installation",id:"manual-installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create a user",id:"create-a-user-1",level:3},{value:"Install Rust with Rustup tool",id:"install-rust-with-rustup-tool",level:3},{value:"Lightning installer rust dependencies",id:"lightning-installer-rust-dependencies",level:3},{value:"Linux dependencies",id:"linux-dependencies",level:3},{value:"Installing Lightning CLI",id:"installing-lightning-cli",level:3},{value:"Key generator",id:"key-generator",level:3},{value:"Set user path in config.toml",id:"set-user-path-in-configtoml",level:3},{value:"Set testnet in config.toml",id:"set-testnet-in-configtoml",level:3},{value:"Start the node",id:"start-the-node",level:3},{value:"Systemd Service Setup",id:"systemd-service-setup",level:3},{value:"Docker installation",id:"docker-installation",level:2},{value:"Quick pull and run",id:"quick-pull-and-run",level:3},{value:"Build from source",id:"build-from-source",level:3},{value:"Docker Container as a Systemd Service",id:"docker-container-as-a-systemd-service",level:3},{value:"Frequently Used Commands (Quick Reference)",id:"frequently-used-commands-quick-reference",level:2}];function m(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["This section describes how to install the Fleek Network Lightning on supported operating systems. The installation can be made quicker by running the ",(0,s.jsx)(n.a,{href:"#assisted-installer",children:"assisted installer"})," or by following the ",(0,s.jsx)(n.a,{href:"#manual-installation",children:"manual installation"})," if you want a bit more control."]}),"\n",(0,s.jsx)(n.admonition,{title:"Warning",type:"caution",children:(0,s.jsxs)(n.p,{children:["If you'd like to participate in the ",(0,s.jsx)(n.a,{href:"/docs/roadmap",children:"alpha Testnet"}),", you have to go through the onboarding process. Check the ",(0,s.jsx)(n.a,{href:"/docs/node/requirements",children:"requirements"})," and find the ",(0,s.jsx)(n.a,{href:"/docs/node/testnet-onboarding",children:"onboarding instructions"})," to enable you to proceed and ",(0,s.jsx)(n.a,{href:"/docs/node/install",children:"install"})," a network node successfully."]})}),"\n",(0,s.jsx)(n.h2,{id:"assisted-installer",children:"Assisted installer"}),"\n",(0,s.jsxs)(n.p,{children:["The assisted installer is a script written in ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Bash_(Unix_shell)",children:"Bash"})," (Unix shell) that is available as a curl command line."]}),"\n",(0,s.jsx)(n.h3,{id:"prerequesites",children:"Prerequesites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A basic knowledge of command line interface (CLI)"}),"\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.a,{href:"/docs/node/requirements#server",children:"supported"})," Linux server"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"connect-to-your-server",children:"Connect to your server"}),"\n",(0,s.jsx)(n.p,{children:"Connect to the Linux server where the Node's going to be installed via SSH by opening a shell session there."}),"\n",(0,s.jsx)(n.p,{children:"If you have set up a public SSH key for the machine, connecting to the server should be as simple as:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"ssh <USERNAME>@<REMOTE_HOST>\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["Check the cloud provider for instructions to understand how to setup an ssh connection and connect to it remotely. Some other users might have local access to a ",(0,s.jsx)(n.a,{href:"/docs/node/requirements#server",children:"supported"})," Linux server. To keep this guide short, we'll assume you've rented a VPS from a cloud provider."]})}),"\n",(0,s.jsx)(n.h3,{id:"create-a-user",children:"Create a user"}),"\n",(0,s.jsx)(l.ZP,{}),"\n",(0,s.jsx)(n.h3,{id:"run-the-script-for-a-quick-install",children:"Run the script for a quick install"}),"\n",(0,s.jsx)(n.p,{children:"Copy and paste it to the server host terminal and execute it to launch the assisted installation process, as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"curl https://get.fleek.network | bash\n"})}),"\n",(0,s.jsx)(n.p,{children:"On success, you should be greeted by the following welcome screen:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'\u2b50\ufe0f Fleek Network Lightning CLI installer \u2b50\ufe0f\n\n            zeeeeee-\n            z$$$$$$"\n          d$$$$$$"\n          d$$$$$P\n        d$$$$$P\n        $$$$$$"\n      .$$$$$$"\n    .$$$$$$"\n    4$$$$$$$$$$$$$"\n  z$$$$$$$$$$$$$"\n  """""""3$$$$$"\n        z$$$$P\n        d$$$$"\n      .$$$$$"\n    z$$$$$"\n    z$$$$P\n  d$$$$$$$$$$"\n  *******$$$"\n      .$$$"\n      .$$"\n    4$P"\n    z$"\n  zP\n  z"\n/\n\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83c\udf0d Website https://fleek.network\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83d\udcda Documentation https://docs.fleek.network\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83d\udcbe Git repository https://github.com/fleek-network/lightning\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83e\udd16 Discord https://discord.gg/fleek\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83d\udc24 Twitter https://twitter.com/fleek_net\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83c\udfa8 Ascii art by https://www.asciiart.eu\n\n...\n\nRemaining output omitted for brevity, you\'ll not see this text line\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Follow the installation wizard to have the Fleek Network Lightning CLI and service installed on the ",(0,s.jsx)(n.a,{href:"/docs/node/requirements",children:"supported server"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"After creating the service, launch the service by executing the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo systemctl start lightning.service\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["To learn more about Systemctl commands, visit the section ",(0,s.jsx)(n.a,{href:"#use-systemctl-to-manage-systemd-service",children:"Use Systemctl to manage the Lightning Service"})]})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Find the timeline of events for the Lightning service by checking the log files. Learn about it in the section ",(0,s.jsx)(n.a,{href:"/docs/node/analyzing-logs",children:"Log Messages"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["Once the installation is complete, do a health check! Check the section ",(0,s.jsx)(n.a,{href:"/docs/node/health-check",children:"Health Check"})," to learn how to do a node health checkup."]}),"\n",(0,s.jsx)(n.h3,{id:"about-the-process",children:"About the process"}),"\n",(0,s.jsxs)(n.p,{children:["The installation process is open source and transparent. The source is available in the ",(0,s.jsx)(n.a,{href:"https://get.fleek.network",children:"get.fleek.network"})," or the origin repository ",(0,s.jsx)(n.a,{href:"https://github.com/fleek-network/get.fleek.network",children:"here"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:'"Get Fleek Network" is an attempt to make our software more accessible. By providing scripts to automate the installation process of our software, we believe that it can help improve the onboarding experience of our users.'})}),"\n",(0,s.jsx)(n.p,{children:"The installer assists the node operator by automating the Lightning CLI build from the open-source code and setting up the system service. A node operator should use the assisted installer to ease onboarding, reduce repetition,"}),"\n",(0,s.jsx)(n.p,{children:"At a high level, the installer will:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Install required dependencies, e.g. rust toolchain"}),"\n",(0,s.jsxs)(n.li,{children:["Pull the source code from the origin ",(0,s.jsx)(n.a,{href:"https://github.com/fleek-network/lightning",children:"repository"})]}),"\n",(0,s.jsxs)(n.li,{children:["Build the binary, e.g. a ",(0,s.jsx)(n.code,{children:"lightning CLI"})," (lgtn) is compiled from source code"]}),"\n",(0,s.jsxs)(n.li,{children:["Setup a ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Systemd",children:"Systemd"})," service named lightning"]}),"\n",(0,s.jsx)(n.li,{children:"Provide instructions to launch, stop the Fleek network via the Systemd lightning service"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Remember that if you use the assisted installer, you won't have to do the ",(0,s.jsx)(n.a,{href:"#manual-installation",children:"manual installation"})," process as described in the next section. On success, the assisted installer should provide the same result as following the manual instructions."]})}),"\n",(0,s.jsx)(n.h2,{id:"manual-installation",children:"Manual installation"}),"\n",(0,s.jsxs)(n.p,{children:["The following section will walk through the dependencies and Rust installation process for Linux. If you're on Windows, we recommend to setup ",(0,s.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/windows/wsl/install",children:"Windows Subsystem Linux"}),", reading the ",(0,s.jsx)(n.a,{href:"https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-10#1-overview",children:"Ubuntu tutorial"})," or picking another ",(0,s.jsx)(n.a,{href:"/docs/node/requirements#server",children:"supported distro"}),". The WSL will let you use Linux applications, utilities and bash command tools you'll find in the tutorial."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["We're only supporting Linux operating system (server edition). Find the list of supported OS ",(0,s.jsx)(n.a,{href:"/docs/node/requirements#server",children:"here"}),"."]})}),"\n",(0,s.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"To follow the guide, you will need the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Familiarity with the command-line interface"}),"\n",(0,s.jsx)(n.li,{children:"Git"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You're required to have some experience with the command-line interface and have Git installed; Also, you should be happy to troubleshoot, since versions might differ from the time of writing and reading. Most times, a simple web search provides the best answers."}),"\n",(0,s.jsxs)(n.p,{children:["If you don't have Git installed, learn more about it and the instructions by reading the ",(0,s.jsx)(n.a,{href:"https://git-scm.com/book/en/v2",children:"Git documentation"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"create-a-user-1",children:"Create a user"}),"\n",(0,s.jsx)(l.ZP,{}),"\n",(0,s.jsx)(n.h3,{id:"install-rust-with-rustup-tool",children:"Install Rust with Rustup tool"}),"\n",(0,s.jsxs)(n.p,{children:["Visit the ",(0,s.jsx)(n.a,{href:"https://www.rust-lang.org/",children:"Rust website"})," getting started guide, to find, copy and run the ",(0,s.jsx)(n.a,{href:"https://rustup.rs/",children:"Rustup tool"})," for installation and version management."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://curl.se/",children:"curl"})," is an application that is generally available in most OS, if missing install it. Find more ",(0,s.jsx)(n.a,{href:"https://curl.se/",children:"here"}),"."]})}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, if you have installed Rust in the past, you may want to update it \ud83d\udc4c."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"rustup update\n"})}),"\n",(0,s.jsx)(n.p,{children:"During the installation process, if asked about preferences, select the default option!"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"You can uninstall at any time with rustup self uninstall and\nthese changes will be reverted.\n\nCurrent installation options:\n\n\n   default host triple: x86_64-unknown-linux-gnu\n     default toolchain: stable (default)\n               profile: default\n  modify PATH variable: yes\n\n1) Proceed with installation (default)\n2) Customize installation\n3) Cancel installation\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Once complete, you'll have to restart your current shell or reload the \"PATH\" environment variable to include Cargo's bin directory ",(0,s.jsx)(n.code,{children:"$HOME/.cargo/bin"}),'. This is required to let you use "cargo" command globally.']})}),"\n",(0,s.jsx)(n.p,{children:"To configure your current shell, run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'source "$HOME/.cargo/env"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["From then on, the latest version of Cargo (Rust's build and package manager tool) should be installed. Learn more about Cargo, ",(0,s.jsx)(n.a,{href:"https://doc.rust-lang.org/cargo/index.html",children:"here"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Check the ",(0,s.jsx)(n.code,{children:"version"})," to confirm's working correctly:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cargo --version\n"})}),"\n",(0,s.jsx)(n.p,{children:"Here's the output we got (beware that our version might differ to yours, it's expected \ud83d\ude05)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cargo 1.65.0 (4bc8f24d3 2022-10-20)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"lightning-installer-rust-dependencies",children:"Lightning installer rust dependencies"}),"\n",(0,s.jsxs)(n.p,{children:["Rustup subcommands deal with ",(0,s.jsx)(n.a,{href:"https://rust-lang.github.io/rustup/concepts/toolchains.html",children:"toolchains"}),", a collection of programs required to compile a Rust application."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"rustup toolchain list\n"})}),"\n",(0,s.jsx)(n.p,{children:"For example, on Linux Ubuntu we generally have it set to the default:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"stable-x86_64-unknown-linux-gnu (default)\n"})}),"\n",(0,s.jsx)(n.p,{children:"While on macOS:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"stable-x86_64-apple-darwin (default)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Make sure you have Rustup set to the desired toolchain as default if required \ud83d\udc81\u200d\u2640\ufe0f!"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"rustup default <TOOLCHAIN-LIST-NAME>\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Rust compilation is long and compiler caching can help speed things up immensely. The Lightning CLI project can be used to reduce the perceived compilation times."})}),"\n",(0,s.jsx)(n.h3,{id:"linux-dependencies",children:"Linux dependencies"}),"\n",(0,s.jsx)(n.p,{children:"On Linux (we'll stick with Ubuntu as the Linux distro example), start by updating the package information in the source list and then upgrade all the installed packages with the latest versions (do the equivalent for your Linux distro), as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo apt-get update\nsudo apt-get upgrade\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["You can optionally pass the ",(0,s.jsx)(n.code,{children:"y"})," flag to skip any user prompts e.g. ",(0,s.jsx)(n.code,{children:"sudo apt-get update -y"})," to any remaining apt-get commands."]})}),"\n",(0,s.jsx)(n.p,{children:"Install the build-essentials packages, necessary for compiling general software and for our use-case Lightning CLI."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo apt-get install build-essential\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Followed by the required tools to compile the application (",(0,s.jsx)(n.a,{href:"https://cmake.org/",children:"cmake"}),", ",(0,s.jsx)(n.a,{href:"https://clang.llvm.org/",children:"clang"}),", ",(0,s.jsx)(n.a,{href:"https://www.freedesktop.org/wiki/Software/pkg-config/",children:"pkg-config"})," and ",(0,s.jsx)(n.a,{href:"https://packages.debian.org/sid/libssl-dev",children:"libssl-dev "}),")."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo apt-get install cmake clang pkg-config libssl-dev gcc-multilib\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["For Debian, you should install ",(0,s.jsx)(n.code,{children:"gcc"}),", as follows:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo apt-get update\nsudo apt-get install gcc\n"})})]}),"\n",(0,s.jsxs)(n.p,{children:["Now install the ",(0,s.jsx)(n.a,{href:"https://grpc.io/docs/protoc-installation/",children:"Protobufer Compiler"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo apt-get install protobuf-compiler\n"})}),"\n",(0,s.jsx)(n.p,{children:"Ensure the compiler version is 3+"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"protoc --version\n"})}),"\n",(0,s.jsx)(n.h3,{id:"installing-lightning-cli",children:"Installing Lightning CLI"}),"\n",(0,s.jsx)(n.p,{children:"If you haven't already, clone the Fleek Network's Lightning repository to your machine."}),"\n",(0,s.jsx)(o.ZP,{}),"\n",(0,s.jsxs)(n.p,{children:["When git clone completes \ud83d\udc4d, ",(0,s.jsx)(n.code,{children:"change directory"})," to the project directory e.g. we cloned to the default name ",(0,s.jsx)(n.code,{children:"~/fleek-network/lightning"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd ~/fleek-network/lightning\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"~/fleek-network/lightning"})," or ",(0,s.jsx)(n.code,{children:"$HOME/fleek-network/lightning"})," directory is the default or recommended location to store the repository. If you like to follow conventions, then is best to stick with the recommendation, to avoid confusion and make it easier to follow our documentation."]})}),"\n",(0,s.jsxs)(n.p,{children:["If you list (",(0,s.jsx)(n.code,{children:"ls"}),") the files in the directory, it should be similar to:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:".\n\u251c\u2500\u2500 CODE_OF_CONDUCT.md\n\u251c\u2500\u2500 CONTRIBUTING.md\n\u251c\u2500\u2500 Cargo.lock\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 codecov.yml\n\u251c\u2500\u2500 core\n\u251c\u2500\u2500 docs\n\u251c\u2500\u2500 lib\n\u251c\u2500\u2500 lightning.toml\n\u251c\u2500\u2500 rust-toolchain\n\u251c\u2500\u2500 rustfmt.toml\n\u251c\u2500\u2500 services\n\u2514\u2500\u2500 target\n"})}),"\n",(0,s.jsxs)(n.p,{children:["At this point, you should be able to run the ",(0,s.jsx)(n.code,{children:"install"})," command successfully."]}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"If you already had Rust installed, or the project before, and skipped instructions directly here, there might be case where you get errors. So, make sure to clear your work directory:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cargo clean\ncargo update\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Start the ",(0,s.jsx)(n.code,{children:"install"})," process by running the command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cargo +stable install --locked --path core/cli\n"})}),"\n",(0,s.jsx)(n.p,{children:"The installation process is long, as it compiles the application binary for us from the source code."}),"\n",(0,s.jsx)(n.p,{children:"\ud83c\udf08 Here's the output when successful! Note, that the output might differ slightly from time of writing."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"    Finished release [optimized] target(s) in 11m 22s\n  Installing /home/lgtn/.cargo/bin/lightning\n   Installed package `lightning v0.1.0 (/crates/lightning)` (executable `lightning`)\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Once Rust generates the binary ",(0,s.jsx)(n.code,{children:"lightning-node"}),", you can find it in the directory ",(0,s.jsx)(n.code,{children:"$HOME/.cargo/bin/lightning-node"}),". The location can be overridden if ",(0,s.jsx)(n.code,{children:"$CARGO_HOME"})," is set. Alternatively, if you've run the ",(0,s.jsx)(n.code,{children:"cargo build"})," command and depending on the usage of ",(0,s.jsx)(n.code,{children:"+stable"})," flag, the binary should be located at ",(0,s.jsx)(n.code,{children:"~/fleek-network/lightning/target/debug/lightning-node"})," or ",(0,s.jsx)(n.code,{children:"~/fleek-network/lightning/target/release/lightning-node"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["You can create a ",(0,s.jsx)(n.code,{children:"lgtn"})," symbolic link to ",(0,s.jsx)(n.code,{children:"/usr/local/bin"})," to make it available globally."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'sudo ln -s "/home/lgtn/.cargo/bin/lightning-node" /usr/local/bin/lgtn\n'})}),"\n",(0,s.jsxs)(n.p,{children:["After completing, you'll have the ability to type ",(0,s.jsx)(n.code,{children:"lgtn"})," to execute the binary anywhere for your user account. Other users might find it better to copy or create an ",(0,s.jsx)(n.code,{children:"alias"})," instead."]}),"\n",(0,s.jsxs)(n.p,{children:["Run the ",(0,s.jsx)(n.code,{children:"lgtn help"})," sub-command as a checkup:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"Usage: lightning-node [OPTIONS] <COMMAND>\n\nCommands:\n  run           Start the node\n  keys          Handle keys\n  print-config  Print the loaded configuration\n  help          Print this message or the help of the given subcommand(s)\n\nOptions:\n  -c, --config <CONFIG>      Path to the toml configuration file [default: lightning.toml]\n      --with-mock-consensus  Determines that we should be using the mock consensus backend\n  -v...                      Increases the level of verbosity (the max level is -vvv)\n      --log-location         Print code location on console logs\n  -h, --help                 Print help\n  -V, --version              Print version\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["Beware that your output might differ a bit, as ",(0,s.jsx)(n.a,{href:"https://github.com/fleek-network/lightning",children:"Lightning"}),' is in constant development. Note that you\'ll have to "re-install" every time you want to pull updates from the source repository, as the update at the time of writing is done manually and not automatically.']})}),"\n",(0,s.jsx)(n.h3,{id:"key-generator",children:"Key generator"}),"\n",(0,s.jsx)(n.p,{children:"Before starting the node, you should generate a public and private key."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"lgtn keys generate\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The keys will be generated and placed under the system directory ",(0,s.jsx)(n.code,{children:"~/.lightning/keystore"}),". The ",(0,s.jsx)(n.code,{children:"private"})," key is the user's responsibility and no one else can generate or recover it for you, including Fleek Network or any team member. Your keys, your responsibility!"]}),"\n",(0,s.jsx)(n.h3,{id:"set-user-path-in-configtoml",children:"Set user path in config.toml"}),"\n",(0,s.jsx)(a.ZP,{}),"\n",(0,s.jsx)(n.h3,{id:"set-testnet-in-configtoml",children:"Set testnet in config.toml"}),"\n",(0,s.jsxs)(n.p,{children:["Set the testnet attribute to ",(0,s.jsx)(n.code,{children:"true"})," in the ",(0,s.jsx)(n.code,{children:"config.toml"})," located in the path ",(0,s.jsx)(n.code,{children:"~/.lightning/config.toml"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'[application]\ndb_path = "~/.lightning/data/app_data"\nmode = "Prod"\nstorage = "RocksDb"\ntestnet = true\n\n...\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The configuration file should have more content, which was omitted here to keep it short and to the point. You're interested in the ",(0,s.jsx)(n.code,{children:"testnet"})," property name only."]})}),"\n",(0,s.jsx)(n.h3,{id:"start-the-node",children:"Start the node"}),"\n",(0,s.jsx)(n.admonition,{title:"Warning",type:"caution",children:(0,s.jsxs)(n.p,{children:["To participate in the ",(0,s.jsx)(n.a,{href:"/docs/roadmap",children:"alpha Testnet"}),", you have to through the onboarding process. Make sure you request access by following the ",(0,s.jsx)(n.a,{href:"/docs/node/testnet-onboarding",children:"onboarding instructions"}),". If you fail to enable your node for testnet, it'll not run!"]})}),"\n",(0,s.jsxs)(n.p,{children:["To start the node, you should execute the sub-command ",(0,s.jsx)(n.code,{children:"run"}),". Noteworthy that while it launches the node, you're recommended to set up a systemd service to run it for a long period."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"lgtn run\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"WARNING",type:"caution",children:(0,s.jsxs)(n.p,{children:["We recommend setting up the process as a systemd service, as it's a long-running process. Instructions to setup a systemd service are available in the section ",(0,s.jsx)(n.a,{href:"#systemd-service-setup",children:"Systemd Service Setup"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["Great! You have successfully installed all the required packages, and libraries and have compiled and installed lightning. Check the section ",(0,s.jsx)(n.a,{href:"/docs/node/health-check",children:"Health Check"})," to learn how to do a node health checkup."]}),"\n",(0,s.jsx)(n.h3,{id:"systemd-service-setup",children:"Systemd Service Setup"}),"\n",(0,s.jsx)(n.p,{children:"Create a new Systemd service file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo touch /etc/systemd/system/lightning.service\n"})}),"\n",(0,s.jsx)(n.p,{children:"Open the file and put the following content:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"[Unit]\nDescription=Fleek Network Node lightning service\n\n[Service]\nType=simple\nMemoryHigh=32G\nRestartSec=15s\nRestart=always\nExecStart=lgtn -c /home/lgtn/.lightning/config.toml -vv run\nExecStop=killall -9 lgtn\nStandardOutput=append:/var/log/lightning/output.log\nStandardError=append:/var/log/lightning/diagnostic.log\nEnvironment=TMPDIR=/var/tmp\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["Notice that we're using ",(0,s.jsx)(n.code,{children:"lgnt"})," as the username. If you have a different custom username change it accordingly. Beware that we've recommended using a ",(0,s.jsx)(n.code,{children:"non-root"})," user, as described in the section ",(0,s.jsx)(n.a,{href:"#create-a-user-1",children:"create a user"}),"."]})}),"\n",(0,s.jsx)(c.ZP,{}),"\n",(0,s.jsx)(n.p,{children:"Change the file permissions for the service:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo chmod 644 /etc/systemd/system/lightning.service\n"})}),"\n",(0,s.jsx)(n.p,{children:"After creating the service file, you should reload the Systemd process, to apply the newly created service. You can do this by executing:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo systemctl daemon-reload\n"})}),"\n",(0,s.jsx)(n.p,{children:"To start the service at boot, use the enable command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo systemctl enable lightning.service\n"})}),"\n",(0,s.jsx)(n.p,{children:"Create the directory where the log message will be stored, as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo mkdir -p /var/log/lightning\n"})}),"\n",(0,s.jsx)(n.p,{children:"You may want to create empty placeholders for the stdout and stderr log files:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo touch /var/log/lightning/output.log\nsudo touch /var/log/lightning/diagnostic.log\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"WARNING",type:"caution",children:(0,s.jsxs)(n.p,{children:["We're assuming that you've ",(0,s.jsx)(n.a,{href:"#create-a-user-1",children:"created a new user"})," and can start the service operating without ",(0,s.jsx)(n.strong,{children:"sudo"}),"."]})}),"\n",(0,s.jsx)(n.p,{children:"Start the service by:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo systemctl start lightning.service\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Find the timeline of events for the Lightning service by checking the log files. Learn about it in the section ",(0,s.jsx)(n.a,{href:"/docs/node/analyzing-logs",children:"Log Messages"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["To learn more, visit the section ",(0,s.jsx)(n.a,{href:"#use-systemctl-to-manage-systemd-service",children:"Use Systemctl to manage the Lightning Service"})]}),"\n",(0,s.jsx)(n.h2,{id:"docker-installation",children:"Docker installation"}),"\n",(0,s.jsxs)(n.p,{children:["In this section we'll describe how to run a Fleek Network Lightning Node as a Docker Service. We're going to assume that you have Docker installed and running. If you need help to install Docker, check the guide ",(0,s.jsx)(n.a,{href:"/guides/Node%20Operators/running-a-node-in-docker",children:"running a node in docker"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["a) We can ",(0,s.jsx)(n.a,{href:"#quick-pull-and-run",children:"easily pull and run"})," the Lightning Docker image from our registry to run the Docker Container quickly."]}),"\n",(0,s.jsxs)(n.p,{children:["b) ",(0,s.jsx)(n.a,{href:"#build-from-source",children:"Build the Docker image"})," from the repository source code"]}),"\n",(0,s.jsxs)(n.p,{children:["Optionally, ",(0,s.jsx)(n.a,{href:"#docker-container-as-a-systemd-service",children:"wrap the Docker Container as a Systemd Service"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The Docker images are built for particular CPU architectures (x64) and as declared in the ",(0,s.jsx)(n.a,{href:"/docs/node/requirements/#specs",children:"requirements"}),", we're mainly supporting ",(0,s.jsx)(n.code,{children:"GenuineIntel"}),", as there has been reports of failure to build and run the binary on AMD. If you're running on a ",(0,s.jsx)(n.code,{children:"AuthenticAMD"}),", provide us feedback on our ",(0,s.jsx)(n.a,{href:"https://discord.gg/fleek",children:"Discord"}),"."]})}),"\n",(0,s.jsx)(n.h3,{id:"quick-pull-and-run",children:"Quick pull and run"}),"\n",(0,s.jsx)(n.p,{children:"You can pull an run the Lightning pre-built Docker image from our GitHub and run the Docker container quickly by executing the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo docker run \\\n    -p 4200-4299:4200-4299 \\\n    -p 4300-4399:4300-4399 \\\n    --mount type=bind,source=$HOME/.lightning,target=/home/lgtn/.lightning \\\n    --mount type=bind,source=/var/tmp,target=/var/tmp \\\n    --name lightning-node \\\n    -it ghcr.io/fleek-network/lightning:latest\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The command has a list of ports ",(0,s.jsx)(n.code,{children:"-p"})," values that map ports in the container on the Docker host. While we try to keep the information across our documentation in sync with the latest changes or requirements e.g. port number changes, make sure that you check the section ",(0,s.jsx)(n.a,{href:"/docs/node/requirements#ports",children:"ports"})," to find the latest updates."]})}),"\n",(0,s.jsx)(n.h3,{id:"build-from-source",children:"Build from source"}),"\n",(0,s.jsxs)(n.p,{children:["Clone the repository located at ",(0,s.jsx)(n.a,{href:"https://github.com/fleek-network/lightning",children:"https://github.com/fleek-network/lightning"}),"."]}),"\n",(0,s.jsx)(o.ZP,{}),"\n",(0,s.jsxs)(n.p,{children:["Change directory to the project source code directory, e.g. the default ",(0,s.jsx)(n.code,{children:"~/fleek-network/lightning"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd ~/fleek-network/lightning\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Build the image named as ",(0,s.jsx)(n.code,{children:"lightning"})," from our Dockerfile:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo docker build -t lightning -f ./Dockerfile .\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Take note of the Docker image name ",(0,s.jsx)(n.code,{children:"lightning"}),", as that's the name we'll use and pass to the ",(0,s.jsx)(n.code,{children:"Docker run"})," to be successful. You can name it differently if that's your preference."]})}),"\n",(0,s.jsxs)(n.p,{children:["Once the image is built, you can launch the Docker Container with a ",(0,s.jsx)(n.code,{children:"--name"})," such as ",(0,s.jsx)(n.code,{children:"lightning-node"})," from the ",(0,s.jsx)(n.code,{children:"lightning"})," image we just created by running:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo docker run \\\n  -p 4200-4299:4200-4299 \\\n  -p 4300-4399:4300-4399 \\\n  --mount type=bind,source=$HOME/.lightning,target=/home/lgtn/.lightning \\\n  --mount type=bind,source=/var/tmp,target=/var/tmp \\\n  --name lightning-node \\\n  -it lightning\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The command has a list of ports ",(0,s.jsx)(n.code,{children:"-p"})," values that map ports in the container on the Docker host. While we try to keep the information across our documentation in sync with the latest changes or requirements e.g. port number changes, make sure that you check the section ",(0,s.jsx)(n.a,{href:"/docs/node/requirements#ports",children:"ports"})," to find the latest updates."]})}),"\n",(0,s.jsxs)(n.p,{children:["If a ",(0,s.jsx)(n.code,{children:"~/.lightning"})," directory or ",(0,s.jsx)(n.code,{children:"~/.lightning/keystore"})," doesn't exist, one is created for you on ",(0,s.jsx)(n.code,{children:"docker run"}),". You'll need to have the directory populated with the ",(0,s.jsx)(n.code,{children:"config.toml"})," and ",(0,s.jsx)(n.code,{children:"keystore"})," if you want to use a particular identity. Learn more about managing the keystore ",(0,s.jsx)(n.a,{href:"/guides/Node%20Operators/managing-the-keystore",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"docker-container-as-a-systemd-service",children:"Docker Container as a Systemd Service"}),"\n",(0,s.jsx)(n.p,{children:"Create a unit configuration file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo touch /etc/systemd/system/docker-lightning.service\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Open the ",(0,s.jsx)(n.code,{children:"docker-lightning.service"})," file in your favourite text editor and put the content:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"[Unit]\nDescription=Fleek Network Node lightning service\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nRestart=always\nRestartSec=5\nTimeoutStartSec=0\nExecStartPre=-/usr/bin/docker kill lightning-node\nExecStartPre=-/usr/bin/docker rm lightning-node\nExecStartPre=/usr/bin/docker pull ghcr.io/fleek-network/lightning:latest\nExecStart=/usr/bin/docker run -p 4200-4299:4200-4299 -p 4300-4399:4300-4399 --mount type=bind,source=/home/skywalker/.lightning,target=/home/lgtn/.lightning --mount type=bind,source=/var/tmp,target=/var/tmp --name lightning-node ghcr.io/fleek-network/lightning:latest\nExecStop=/usr/bin/docker stop lightning-node\nStandardOutput=append:/var/log/lightning/output.log\nStandardError=append:/var/log/lightning/diagnostic.log\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,s.jsx)(n.p,{children:"Change the file permissions by running the command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo chmod 644 /etc/systemd/system/docker-lightning.service\n"})}),"\n",(0,s.jsx)(n.p,{children:"Next, reload the Systemctl Daemon:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo systemctl daemon-reload\n"})}),"\n",(0,s.jsx)(n.p,{children:"Enable the service on startup when the system boots:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo systemctl enable docker-lightning.service\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Learn how to manage the Systemd Service by reading the section ",(0,s.jsx)(n.a,{href:"/docs/node/systemd-service",children:"systemd service"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"frequently-used-commands-quick-reference",children:"Frequently Used Commands (Quick Reference)"}),"\n",(0,s.jsxs)(n.p,{children:["A quick reference of the most Frequently Used Commands are available for ",(0,s.jsx)(n.a,{href:"/references/Lightning%20CLI/frequently-used-commands-for-native-setup",children:"Native"})," and ",(0,s.jsx)(n.a,{href:"/references/Docker/frequently-used-commands-for-docker-setup",children:"Docker"})," setups. If you'd like a more in depth explanation of the commands, check the ",(0,s.jsx)(n.a,{href:"/docs/node/health-check",children:"health check"}),", ",(0,s.jsx)(n.a,{href:"/docs/node/analyzing-logs",children:"analyzing logs"}),", ",(0,s.jsx)(n.a,{href:"/docs/node/systemd-service",children:"systemd service"})," and ",(0,s.jsx)(n.a,{href:"/guides/index",children:"guides"})," sections separately."]}),"\n",(0,s.jsx)(r.Z,{name:"Helder Oliveira",image:"https://github.com/heldrida.png",title:"Software Developer + DX",url:"https://github.com/heldrida"})]})}function x(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},3872:(e,n,t)=>{t.d(n,{Z:()=>i});t(7294);var s=t(5893);const i=e=>{let{image:n,name:t,title:i,url:r,communityMember:o=!1}=e;return(0,s.jsx)("section",{className:"author_card",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"avatar",children:(0,s.jsx)("a",{href:r,target:"_blank",alt:t,children:(0,s.jsx)("img",{src:n,alt:t})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"name",children:(0,s.jsx)("a",{href:r,target:"_blank",alt:t,children:t})}),(0,s.jsx)("span",{className:"title",children:i}),(0,s.jsxs)("span",{className:"discord",children:[o?"Join our community on":"Got questions? Find us on"," ",(0,s.jsx)("a",{href:"https://discord.gg/fleek",target:"_blank",children:"discord!"})]})]})]})})}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>o});var s=t(7294);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);